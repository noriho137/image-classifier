{% load static %}
{% if top_k_predictions %}
<div class="row">
    <div class="col-lg-5 bg-light">
        <img class="img-fluid mx-auto d-block mt-4 mb-4" src="{{ image_url }}" />
        <table class="table">
            <caption>
                Prediction result
            </caption>
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Label</th>
                    <th>Probability</th>
                </tr>
            </thead>
            <tbody>
                {% for prediction in top_k_predictions %}
                <tr>
                    <td align="right">{{ forloop.counter }}</td>
                    <td>{{ prediction.label }}</td>
                    <td align="right">{{ prediction.probability | floatformat:3 }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="col-lg-7">
        <div class="mt-4">
            <canvas id="barChart"></canvas>
        </div>
    </div>
</div>
<script>
    var ctx = document.getElementById('barChart');
    var data = setData({{ top_k_predictions | safe }});
    var options = setOptions();
    ctx.height = 18 * data.datasets[0]['data'].length + 60;
    var myBarChart = new Chart(ctx, {
        type: 'horizontalBar',
        data: data,
        options: options
    });
</script>
{% endif %}